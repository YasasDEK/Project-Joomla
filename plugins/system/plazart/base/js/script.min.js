!function(e){var t="ontouchstart"in window&&!/hp-tablet/gi.test(navigator.appVersion);if(t){e.fn.touchmenu=function(){if(!e(document).data("touchmenu")){e(document).data("touchmenu",1).data("touchitems",e()).on("click hidesub",function(){e(document).removeClass("hoverable").data("touchitems").data("noclick",0).removeClass("open")});if(navigator.userAgent.match(/(iPad|iPhone);.*CPU.*OS 6_\d/i)){e(document.body).children(":not(.nav)").on("click",function(){e(document).trigger("hidesub")})}}return this.each(function(){var t=e(this).has(".mega").length?"li.mega":"li.parent",n=e(this).find(t),r=function(){e(this).data("noclick",0)},i=function(i){i.stopPropagation();e(document.body).addClass("hoverable");var s=e(this),o=!s.data("noclick");if(o){var u=s.children(".dropdown-menu"),a=s.hasClass("open"),f=u.prop("style"),l=f?f["display"]:"";if(u.css("display","none").css("display")=="none"){u.css("display",l);if(!a){e(document).data("touchitems").removeClass("open");s.addClass("open").parentsUntil(".nav").filter(t).addClass("open");o=u.css("display")!="none"}}else{o=0}u.css("display",l)}n.data("noclick",0);s.data("noclick",o);if(o){e(this).data("rsid",setTimeout(e.proxy(r,this),500)).parent().parentsUntil(".nav").filter(t).addClass("open")}},s=function(r){r.stopPropagation();if(e(this).data("noclick")){r.preventDefault();n.removeClass("open");e(this).addClass("open").parentsUntil(".nav").filter(t).addClass("open")}else{var i=e(this).children("a").attr("href");if(i){window.location.href=i}}};n.on("mouseenter",i).data("noclick",0);e(this).find("li").on("click",s);e(document).data("touchitems",e(document).data("touchitems").add(n))})}}e("html").addClass(t?"touch":"no-touch");e(document).ready(function(){if(window.MooTools&&window.MooTools.More&&Element&&Element.implement){e(".collapse, .hasTooltip").each(function(){this.show=null;this.hide=null})}if(t){e("ul.nav").has(".dropdown-menu").touchmenu()}else{e(document.body).on("click",'[data-toggle="dropdown"]',function(){if(e(this).parent().hasClass("open")&&this.href&&this.href!="#"||e(".btn-navbar").is(":visible")&&e(this).closest(".always-show").length){window.location.href=this.href}})}})}(jQuery)